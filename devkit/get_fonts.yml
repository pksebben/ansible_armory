---
- name: Get fonts
  block:
    - name: Ensure fonts directory exists
      file:
        path: "/home/{{ user }}/.sources/fonts"
        state: directory
        owner: "{{ user }}"
        mode: 0755

    - name: Get DM-Mono
      git:
        repo: "git@github.com:googlefonts/dm-mono"
        dest: "/home/{{ user }}/.sources/fonts/dm-mono"
      become: yes
      become_user: "{{ user }}"

    - name: Install DM-Mono -> loop
      copy:
        remote_src: yes
        owner: "{{ user }}"
        src: "/home/{{ user }}/.sources/fonts/dm-mono/exports/{{ item }}"
        dest: "/home/{{ user }}/.local/share/fonts/{{ item }}"
      loop:
        - DMMono-Medium.ttf
        - DMMono-Regular.ttf
        - DMMono-Light.ttf
